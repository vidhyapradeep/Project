
<div ng-controller="LabelCtrl as Labelctrl">
    <div class="container-fluid">
        <div class="header">
            <span>{{Labelctrl.LabelText.HdUserRequest}}</span>
        </div>
    </div>
    <div ng-controller="generateRequestCtrl as generateRequestctrl">

        <!--Norecords Found Start-->
        <div ng-show="generateRequestctrl.ShowNRImage==true" class="no-record-found">
            <img src="../../images/NoRecord.png" />
        </div>
        <!--Norecords Found End-->

        <div ng-show="generateRequestctrl.ShowNRImage==false">
            <div class="container_w">
                <!--<div>
                  <span style="color:green;margin-left:30%;margin-bottom:5%;">{{alertMessage}}</span>
                </div>
                  <div>
                      <span style="color:red;margin-left:30%;margin-bottom:5%;">{{alertMessageForGenReq}}</span>
                  </div>-->

                <span class="alert alert-danger" ng-if="alertMessageForGenReq.replace(' ','').length > 0">{{alertMessageForGenReq}}</span>


                <span class="alert alert-success" ng-if="alertMessage.replace(' ','').length > 0">{{alertMessage}}</span>

                <div class="pull-right">
                    <div class="H_search_w">
                        <div class="containerSearch">
                            <i class="fa fa-search"></i>
                            <input type="search" id="search" ng-model="q" placeholder="Search..." />
                        </div>
                    </div>

                    <div class="show_entries">
                        <span>Show Entries</span>
                        <span class="dropdown selectBOx_w">
                            <select ng-model="pageSize" id="pageSize" class="dropdown-menu btn btn-default  fa fa-chevron-down" aria-hidden="true">
                                <option value="5">5</option>
                                <option value="10">10</option>
                                <option value="15">15</option>
                                <option value="20">20</option>
                            </select>

                        </span>
                    </div>

                </div>

            </div>

            <div class="inbox_content padd15">
                <div class="table-responsive">
                    <table class="table table-bordered table_W apply_leave">
                        <thead>
                            <tr>
                                <th ng-repeat="a in vm.userrequestTableTH  track by $index">
                                    <!--<span ng-if="a.subTh.length==0">{{a.th}}</span>
                                    <lable>{{a.th}}</lable>-->
                                    <lable>{{a}}</lable>
                                </th>
                                <th style="display:none">RequestId</th>
                            </tr>
                        </thead>
                        <tbody>


                            <tr ng-repeat="item in generateRequestctrl.generateRequestList | filter : q | startFrom:currentPage*pageSize | limitTo:pageSize">
                                <td>{{item.sno}}</td>
                                <td>{{item.submittedBy}}</td>
                                <td>{{item.userName}}</td>
                                <td style="color:#8552a2; width:29%; word-wrap: break-word;">{{item.message}}</td>
                                <td>{{item.requestedDate}}</td>
                                <td ng-style="{color: item.action_Type=='Requested' ? 'red' : 'green'}">{{item.action_Type}}</td>
                                <td style="width:29%; word-wrap: break-word;">{{item.reply}}</td>
                                <td>{{item.replyDate}}</td>
                                <td><i class="fa fa-pencil-square-o" aria-hidden="true" ng-click="generateRequestctrl.getRequestedMsgForManagerByEmpId(item.requestedId,item.submittedBy,item.message,item.reply);vm.RequestedMessagesForManager()" style="cursor:pointer;"></i></td>
                                <td style="display:none">{{item.requestedId}}</td>
                            </tr>

                        </tbody>
                    </table>
                    <!--<ul class="pagination pagination-sm">
                        <li><a href="#"><i class="fa fa-angle-double-left" aria-hidden="true"></i>Prev</a></li>
                        <li class="active"><a href="#">1</a></li>
                        <li><a href="#">2</a></li>
                        <li><a href="#">3</a></li>
                        <li><a href="#">4</a></li>
                        <li><a href="#">Next<i class="fa fa-angle-double-right" aria-hidden="true"></i></a></li>
                    </ul>-->

                    <ul class="pagination pagination-sm">
                        <li><a ng-show="currentPage == 0 ? false : true" ng-click="currentPage=currentPage-1">Prev</a></li>
                        <li class="active page_count"><a>{{currentPage+1}}/{{numberOfPages()}}</a></li>
                        <li><a ng-show="currentPage >= getData().length/pageSize - 1 ? false : true" ng-click="currentPage=currentPage+1">Next<i class="fa fa-angle-double-right" aria-hidden="true"></i></a></li>
                    </ul>

                </div>
            </div>

        </div>
        <!--===========================================================-->
        <form name="generateRequestForm" method="post" ng-submit="generateRequestctrl.InsertMessages(generateRequestForm.$valid)" novalidate>
            <div class="modal fadein internation-training-details" role="dialog" ng-class="{'active':generateRequestctrl.showUserRequest}">
                <div class="modal-dialog">
                    <div class="modal-content" style="width:110%;">
                        <div class="modal-header modal-header-primary">
                            <button type="button" class="close" ng-click="generateRequestctrl.showUserRequest=false;" data-dismiss="modal">&times;</button>
                            <h4 class="modal-title">Reply Message</h4>
                        </div>
                        <div class="modal-body">
                            <div class="inbox_content padd15">


                                <div class="form-group" style="display:none;">
                                    <label class="control-label col-sm-6">Request ID:</label>
                                    <div class="col-sm-6">
                                        <input type="text" class="form-control" style="width:300px;height:auto;" ng-model="requestID" readonly />
                                    </div>
                                </div>

                                <!--<div class="form-group">
                                    <label class="control-label col-sm-6">Employee ID:</label>
                                    <div class="col-sm-6">
                                        <input type="text" class="form-control" style="width:300px;height:auto;" ng-model="employeeID" readonly />
                                    </div>
                                </div>-->

                                <div class="form-group">
                                    <label class="control-label col-sm-6">User Message:</label>
                                    <div class="col-sm-6">
                                        <textarea rows="4" cols="53" name="comment" ng-model="message" style="margin-top:10px;" readonly></textarea>
                                        <!--<input type="text" class="form-control" style="width:300px;height:auto;"  ng-model="message" readonly />-->
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label class="control-label col-sm-6">Reply:</label>
                                    <div class="col-sm-6">
                                        <textarea rows="4" cols="53" name="comment" ng-model="replyMessage" style="margin-top:10px;" required></textarea>
                                    </div>
                                    <div class="help-block" style="color:red;margin-left:53%;" ng-show="generateRequestForm.comment.$error.required" ng-if="generateRequestForm.$submitted">Please add reply for User Message</div>
                                </div>

                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="submit" class="btn btn-purple">Submit</button>  <!--ng-click="generateRequestctrl.InsertMessages()"-->
                            <button type="button" ng-click="generateRequestctrl.showUserRequest=false;" class="btn btn-purple" data-dismiss="modal">Close</button>
                        </div>

                    </div>






                </div>
            </div>

        </form>

    </div>
</div>